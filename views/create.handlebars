<div id="bubble">
    <a href="/events">
        <img src="/images/header2.gif" id="header-logo">
    </a>
    <hgroup class="speech-bubble" style="text-align:center;">
        <h1>WHAT'S<br>HAPPENIN' TN?</h1>
    </hgroup>
    <hgroup class="speech-bubble-2" style="text-align:center;">
        <h1><a href="/events" id="home">#KEEPITLOCAL</a></h1>
    </hgroup>

</div>


<div id="dark-panel">
    <br><br><br><br><br>
    <div id="quote">
        <h1>create <br>  a new event.</h1>
    </div>
    <br><br><br>
    <div class="create">
        <form id="create-form">
            <label>name of event</label>
            <input type="text" id="eventName" name="eventName" placeholder="Bootcamp Graduation Party"><br>
            <label>date of event</label>
            <input type="date" id="eventDate" name="eventDate"><br>
            <label>category</label>
            <input type="text" id="category" name="category" placeholder="Party"><br>
            <label id="from-label">from</label><label>to</label><br>
            <input type="time" id="startTime" name="startTime">
            <input type="time" id="endTime" name="endTime"><br>
            <label>address</label>
            <input id="location" type="text" name="location" placeholder="300 Atrium Drive"> 
            <label>city</label>
            <input id="city" name="city" placeholder="Somerset">
            <label>state</label>
            <div id="location-form" class="input-field col s12"></div><br>
            {{!-- <input type="text" name="password" placeholder="event details..."><br> --}}
            <textarea id="details" placeholder="event detals..."></textarea>
            <button type="submit" id="create-btn">create event</button>
        </form>
    </div>
</div>






<footer class="footer">
    <button id="myBtn">Referral</button>
        <div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
    <p>Some text in the Modal..</p>
  </div>

</div>
    KEEP IT LOCALÂ®
    <span id="logout"><a href="/logout" id="logout-link">LOGOUT</a></span>
</footer>

<script>

    var modal = document.getElementById("myModal");

// Get the button that opens the modal
var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks the button, open the modal 
btn.onclick = function() {
  modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}

    $(document).ready(function () {
        $(".event-link").click(function () {
            let event_id = $(this).attr("data-id").val()
            $.ajax(`/${event_id}`, {
                method: "GET",
                data: {
                    id: event_id
                }
            }).then(function (result) {
                window.location.replace(result)
                // window.location = `/event/${id}`
            })
            function expandTextarea(id) {
                document.getElementById(id).addEventListener('keyup', function () {
                    this.style.overflow = 'hidden';
                    this.style.height = 0;
                    this.style.height = this.scrollHeight + 'px';
                }, false);
            }
            expandTextarea('txtarea');
        });


        //list used to populate state selector
        let stateAbrev = ["AK", "AL", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"];
        let trigger = $("<select>").attr("id", "stateVal").append($('<option value="" disabled selected>NJ</option>'));
        for (var i = 0; i < stateAbrev.length; i++) {
            var item = $("<option>").attr("value", i).text(stateAbrev[i]);
            trigger.append(item);
        }
        $("#location-form").append(trigger);
        //initializes state selector trigger
        $('select').formSelect();
        $(document).on("click", ".dropdown-trigger", function () {
            let stateIndex = $("#stateVal").val();
            let stateName = stateAbrev[stateIndex];
            console.log(stateName);
        });

        
    });

    
</script>